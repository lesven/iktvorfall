<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IKT-Vorfall Pr√ºfung - ARZ Haan AG</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <h1>ARZ Haan AG</h1>
            </div>
            <h2>IKT-Vorfall Pr√ºfung (DORA)</h2>
            <p>Bewertung der Meldepflicht bei IKT-Vorf√§llen</p>
        </header>

        <main>            <!-- Welcome Screen -->
            <div id="welcome-screen" class="screen active">
                <div class="card">
                    <h3>Willkommen zur IKT-Vorfall Bewertung</h3>
                    <p><strong>IKT</strong> steht f√ºr Informations- und Kommunikationstechnologien.<br><br></p>
                    <p>Es gibt einen <strong>Security Vorfall</strong> und du bist dir nicht sicher ob der <strong>meldepflichtig</strong> ist?  Diese interaktive Pr√ºfung hilft dir dabei zu bewerten, ob ein IKT-Vorfall nach DORA meldepflichtig ist.<br><br></p>
                    <p>Du wirst durch<strong> 6 einfache Fragen</strong> gef√ºhrt, die mit "Ja" oder "Nein" beantwortet werden k√∂nnen. <strong>Unterhalb der Fragen findest du Beispiele</strong> und weiteref√ºhrende Informationen<br><br>
                    Grunds√§tzlich gilt aber nat√ºrlich: Wenn du dir <strong>unsicher</strong> bist, <strong>ziehe lieber jederzeit unsere Experten</strong> Nikolas Oelkrug-Alders, Ricardo Walsdorfer oder Anika R√ºttgers <strong>hinzu</strong>.</p>
                    
                    <p>
                        <div class="button-group">
                        <button class="btn btn-primary" onclick="startQuestionnaire()">Schnellcheck starten</button></p>
                        </div>
                </div>
            </div>

            <!-- Question Screen -->
            <div id="question-screen" class="screen">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                    <span class="progress-text" id="progress-text">Frage 1 von 6</span>
                </div>
                  <div class="card">
                    <h3 id="question-title">Frage wird geladen...</h3>
                    <p id="question-text">Beschreibung der Frage...</p>
                    
                    <div class="button-group">
                        <button class="btn btn-success" onclick="answerQuestion(true)">Ja</button>
                        <button class="btn btn-danger" onclick="answerQuestion(false)">Nein</button>
                    </div>
                    
                    <div id="additional-info" class="additional-info">
                        <!-- Zus√§tzliche Informationen werden hier eingef√ºgt -->
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-success" onclick="answerQuestion(true)">Ja</button>
                        <button class="btn btn-danger" onclick="answerQuestion(false)">Nein</button>
                    </div>
                    
                    <div class="navigation">
                        <button class="btn btn-secondary" id="back-btn" onclick="goBack()" disabled>Zur√ºck</button>
                        <button class="btn btn-secondary" onclick="resetQuestionnaire()">Neu starten</button>
                    </div>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="result-screen" class="screen">
                <div class="card">
                    <div id="result-content">
                        <!-- Ergebnis wird hier eingef√ºgt -->
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="resetQuestionnaire()">Neue Pr√ºfung starten</button>
                    </div>
                </div>
            </div>            <!-- Contact Screen (Nikolas) -->
            <div id="contact-screen" class="screen">
                <div class="card">
                    <div class="contact-header">
                        <img src="nikolas-photo.jpg" alt="Nikolas Mustermann" class="contact-photo" onerror="this.src='nikolas-photo.jpg'">
                        <div class="contact-info">
                            <h3>Nikolas Oelkrug-Alders</h3>
                            <p class="title">Chief Information Security Officer (CISO)</p>
                        </div>
                    </div>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <strong>üìß E-Mail:</strong>
                            <a href="mailto:N.Oelkrug-Alders@arz.de?subject=IKT Meldung" class="email-link">
                                <a href="mailto:N.Oelkrug-Alders@arz.de?subject=IKT Meldung"></a>N.Oelkrug-Alders@arz.de</a>
                            </a>
                        </div>
                       
                        <div class="contact-item">
                            <strong>üì± Telefon:</strong>
                            <a href="tel:+49 151 5370 4297 ">+49 151 5370 4297 </a>
                        </div>
                    </div>                    
                        
                    
                    <div class="success-message" id="success-message" style="display: none;">
                        <div class="alert alert-success">
                            ‚úÖ Meldung wurde √ºbermittelt. Vielen Dank!
                        </div>
                    </div>
                    
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="resetQuestionnaire()">Schnellcheck erneut starten</button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 ARZ Haan AG. Alle Rechte vorbehalten.</p>
        </footer>
    </div>    <script>
        // Fragebogen-Konfiguration
        console.log("Script.js wurde geladen!");

        const questions = [
            {
                id: 1,
                title: "Betrifft der Vorfall IKT-Systeme?",
                text: "Ist ein Computer-System (Server, Netzwerk, Software, etc.) betroffen?",                additionalInfo: `<strong>üîß Was sind IKT-Systeme?</strong> 
                <br>Alle Computer-Systeme in deinem Unternehmen:<br>
                
                ‚Ä¢ Server, Computer, Handys<br>
                ‚Ä¢ Banking-Programme, Windows, Apps<br>
                ‚Ä¢ Internet, WLAN, Firmen-Netzwerk<br>
                ‚Ä¢ Microsoft 365, sonstige von uns genutzte Cloud-Services<br><br>
                
                <strong>‚ö†Ô∏è Auch das z√§hlt:</strong><br><br>
                ‚Ä¢ Stromausfall, Wasserschaden<br>
                ‚Ä¢ Nur ein Teil des Systems kaputt<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ E-Mail geht nicht<br>
                ‚úÖ Eine unserer Gesch√§fts-Apps st√ºrzt ab<br>
                ‚úÖ Server f√§llt aus
                `
            },
            {
                id: 2,
                title: "Sind kritische oder wichtige Gesch√§ftsfunktionen betroffen?",
                text: "St√∂rt der Vorfall wichtige Arbeitsabl√§ufe in deinem Unternehmen?",
                additionalInfo: `
                <strong>üè¶ Wichtige Gesch√§ftsfunktionen:</strong><br><br>
                ‚Ä¢ Anwendungen von uns die unsere Kunden nutzen<br>
                ‚Ä¢ √úberweisungen und Kartenzahlungen<br>
                ‚Ä¢ Navision<br>
                ‚Ä¢ E-Mail und wichtige IT-Systeme<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ Kundensystem l√§nger als 1h offline<br>
                ‚úÖ Firmenzahlungen werden abgelehnt<br>
                ‚úÖ E-Mail funktioniert nicht<br>
                ‚ùå Interne Schulungs-Plattform offline
                `
            },
            {
                id: 3,
                title: "Entspricht der Vorfall zeitlichen Kriterien?",
                text: "Dauert die St√∂rung schon l√§nger als 1 Stunde?",
                additionalInfo: `
                <strong>‚è∞ Wichtige Zeitgrenzen:</strong><br><br>
                
                <strong>Wesentliche St√∂rung (DORA):</strong><br><br>
                ‚Ä¢ √úber 1 Stunde ohne Service bei kritischen Funktionen<br>
                ‚Ä¢ √úber 2 Stunden bei wichtigen Funktionen<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ Kundensoftware seit 1,5h offline<br>
                ‚úÖ TI-Netz seit 2h ausgefallen<br>
                ‚ùå E-Mail war 45 Min offline<br>
                ‚ùå Website 30 Min langsam
                `
            },
            {
                id: 4,
                title: "Sind personenbezogene oder sensible Daten betroffen?",
                text: "K√∂nnten pers√∂nliche Daten oder Gesch√§ftsgeheimnisse betroffen sein?",
                additionalInfo: `
                <strong>üîí Kritische Daten:</strong><br><br>
                
                <strong>Kundendaten:</strong><br><br>
                ‚Ä¢ Namen, Adressen, Geburtsdaten<br>
                ‚Ä¢ Kontost√§nde, √úberweisungen<br>
                ‚Ä¢ Logins, PINs, Passw√∂rter<br><br>
                
                <strong>Gesch√§ftsdaten:</strong><br><br>
                ‚Ä¢ Vertr√§ge und Gesch√§ftsgeheimnisse<br>
                ‚Ä¢ E-Mails und Mitarbeiterdaten<br>
                ‚Ä¢ System-Zugangsdaten<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ Hacker-Zugriff auf Kundendatenbank<br>
                ‚úÖ USB-Stick mit Kontodaten verloren<br>
                ‚úÖ E-Mail an falschen Empf√§nger<br>
                ‚úÖ Ransomware verschl√ºsselt Dateien<br>
                ‚ùå Test-System ohne echte Daten
                `
            },
            {
                id: 5,
                title: "Sind externe IKT-Dienstleister oder Partner betroffen?",
                text: "Hat der Vorfall mit Cloud-Services oder IT-Dienstleistern zu tun?",
                additionalInfo: `
                <strong>‚òÅÔ∏è Externe IT-Services:</strong><br><br>
                
                <strong>Cloud-Anbieter:</strong><br><br>
                ‚Ä¢ Microsoft 365<br>
                ‚Ä¢ Backup- und Speicher-Services<br><br>
                
                <strong>Banking-Services:</strong><br><br>
                ‚Ä¢ Zahlungsdienstleister<br>
                ‚Ä¢ Kernsysteme<br>
                ‚Ä¢ Internet-Provider<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ Microsoft 365 down ‚Üí E-Mail gest√∂rt<br>
                ‚úÖ Hosting-Ausfall ‚Üí Banking-App offline<br>
                ‚úÖ Internet-Provider-St√∂rung<br>
                ‚ùå Interne Kantinen-Software
                `
            },
            {
                id: 6,
                title: "Besteht Verdacht auf Cyberangriff oder b√∂swillige Aktivit√§ten?",
                text: "Siehst du Anzeichen f√ºr einen m√∂glichen Cyberangriff?",
                additionalInfo: `
                <strong>‚ö†Ô∏è Verdachtsmomente:</strong><br><br>
                
                <strong>Technische Anzeichen:</strong><br><br>
                ‚Ä¢ Ungew√∂hnliche Netzwerk-Aktivit√§ten<br>
                ‚Ä¢ Neue unbekannte Dateien oder Programme<br>
                ‚Ä¢ Verschl√ºsselte oder ver√§nderte Dateien<br>
                ‚Ä¢ Langsame Systeme ohne erkennbaren Grund<br><br>
                
                <strong>Angriffs-Arten:</strong><br><br>
                ‚Ä¢ Phishing-E-Mails oder betr√ºgerische Anrufe<br>
                ‚Ä¢ Ransomware (L√∂segeldforderung)<br>
                ‚Ä¢ DDoS-Angriffe (Website √ºberlastet)<br>
                ‚Ä¢ Unberechtigte Logins oder Zugriffe<br><br>
                
                <strong>üí° Beispiele:</strong><br><br>
                ‚úÖ Ransomware verschl√ºsselt Dateien<br>
                ‚úÖ Phishing-E-Mail f√ºhrt zu Datenverlust<br>
                ‚úÖ Unbekannte Logins von fremden Standorten<br>
                ‚úÖ DDoS macht Website unzug√§nglich<br>
                ‚ùå Zuf√§lliger Hardware-Defekt
                `
            }
        ];

        // Anwendungszustand
        let currentQuestionIndex = 0;
        let answers = [];
        let isQuestionnaireStarted = false;

        // Screen-Management
        function showScreen(screenId) {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
            
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }
        }

        // Fragebogen starten
        function startQuestionnaire() {
            console.log("startQuestionnaire wurde aufgerufen!");
            currentQuestionIndex = 0;
            answers = [];
            isQuestionnaireStarted = true;
            showQuestion();
            showScreen('question-screen');
        }

        // Frage anzeigen
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResult();
                return;
            }

            const question = questions[currentQuestionIndex];
            const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
            
            // Progress Bar aktualisieren
            document.getElementById('progress-fill').style.width = progressPercent + '%';
            document.getElementById('progress-text').textContent = `Frage ${currentQuestionIndex + 1} von ${questions.length}`;
            
            // Frage-Inhalt aktualisieren
            document.getElementById('question-title').textContent = question.title;
            document.getElementById('question-text').textContent = question.text;            // Zus√§tzliche Informationen
            const additionalInfo = document.getElementById('additional-info');
            if (question.additionalInfo) {
                // Process additionalInfo to reduce spacing
                let processedInfo = question.additionalInfo
                    .replace(/<strong>(.*?)<\/strong><br>\s+/g, '<strong>$1</strong> ')  // Replace <br> after strong with space
                    .replace(/<br><br>\s+/g, '<br>')                                    // Replace double breaks with single
                    .trim();
                    
                additionalInfo.innerHTML = `<div class="info-header"><strong>üí° Zus√§tzliche Information:</strong></div>${processedInfo}`;
                additionalInfo.style.display = 'block';
            } else {
                additionalInfo.style.display = 'none';
            }
            
            // Zur√ºck-Button Status
            const backBtn = document.getElementById('back-btn');
            backBtn.disabled = currentQuestionIndex === 0;
        }

        // Antwort verarbeiten
        function answerQuestion(answer) {
            answers[currentQuestionIndex] = answer;
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // Zur√ºck-Navigation
        function goBack() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // Ergebnis berechnen und anzeigen
        function showResult() {
            const resultContent = document.getElementById('result-content');
            const shouldReport = calculateResult();
            
            if (shouldReport) {
                resultContent.innerHTML = `
                    <div class="result-danger">
                        <h3>‚ö†Ô∏è Meldepflichtiger Vorfall erkannt</h3>
                        <p><strong>Bitte informiere Nikolas √ºber diesen Vorfall.</strong></p>
                        <p>Basierend auf deinen Antworten handelt es sich m√∂glicherweise um einen meldepflichtigen IKT-Vorfall nach DORA.</p>
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="showContact()">üìû Nikolas kontaktieren</button>
                        </div>
                    </div>
                `;
            } else {
                resultContent.innerHTML = `
                    <div class="result-success">
                        <h3>‚úÖ Kein meldepflichtiger Vorfall</h3>
                        <p><strong>Bitte dokumentiere den Vorfall intern.</strong></p>
                        <p>Basierend auf deinen Antworten ist keine sofortige Meldung nach DORA erforderlich. Dokumentiere den Vorfall dennoch f√ºr interne Zwecke.</p>
                        <div class="additional-info" style="margin-top: 20px; text-align: left;">
                            <strong>üìã Empfohlene Ma√ünahmen:</strong><br>
                            ‚Ä¢ Vorfall in internem System dokumentieren<br>
                            ‚Ä¢ Ursachen analysieren<br>
                            ‚Ä¢ Pr√§ventive Ma√ünahmen pr√ºfen<br>
                            ‚Ä¢ Bei Unsicherheit: <a href="#" onclick="showContact()">Nikolas Oelkrug-Alders (CISO)</a> oder die IT-Abteilung kontaktieren
                        </div>
                    </div>
                `;
            }
            
            showScreen('result-screen');
        }

        // Ergebnis-Logik
        function calculateResult() {
            // Wenn eine der kritischen Fragen mit "Ja" beantwortet wurde
            const criticalQuestions = [0, 3, 5]; // IKT-Systeme, Personendaten, Cyberangriff
            const moderateQuestions = [1, 2, 4]; // Gesch√§ftsprozesse, Dauer, Externe Systeme
            
            // Kritische Fragen
            let criticalYes = 0;
            criticalQuestions.forEach(index => {
                if (answers[index] === true) criticalYes++;
            });
            
            // Moderate Fragen
            let moderateYes = 0;
            moderateQuestions.forEach(index => {
                if (answers[index] === true) moderateYes++;
            });
            
            // Bewertungslogik
            if (criticalYes >= 2) return true; // Zwei kritische Faktoren
            if (criticalYes >= 1 && moderateYes >= 2) return true; // Ein kritischer + zwei moderate
            if (answers[3] === true) return true; // Personendaten immer melden
            if (answers[5] === true) return true; // Cyberangriff immer melden
            
            return false;
        }

        // Kontakt-Screen anzeigen
        function showContact() {
            showScreen('contact-screen');
        }

        // Fragebogen zur√ºcksetzen
        function resetQuestionnaire() {
            currentQuestionIndex = 0;
            answers = [];
            isQuestionnaireStarted = false;
            showScreen('welcome-screen');
            
            // Progress Bar zur√ºcksetzen
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('progress-text').textContent = 'Frage 1 von 6';
            
            // Erfolgsmeldung verstecken
            const successMessage = document.getElementById('success-message');
            if (successMessage) {
                successMessage.style.display = 'none';
            }
        }

        // E-Mail-Klick-Tracking f√ºr Erfolgsmeldung
        function setupEmailClickTracking() {
            document.addEventListener('click', function(event) {
                if (event.target.matches('a[href^="mailto:"]')) {
                    // Kurze Verz√∂gerung, damit E-Mail-Client √∂ffnen kann
                    setTimeout(() => {
                        const successMessage = document.getElementById('success-message');
                        if (successMessage) {
                            successMessage.style.display = 'block';
                            successMessage.scrollIntoView({ behavior: 'smooth' });
                        }
                    }, 1000);
                }
            });
        }

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOMContentLoaded Event ausgel√∂st!");
            showScreen('welcome-screen');
            setupEmailClickTracking();
        });

        // Tastatur-Navigation
        document.addEventListener('keydown', function(event) {
            if (!isQuestionnaireStarted) return;
            
            switch(event.key) {
                case 'y':
                case 'Y':
                case 'j':
                case 'J':
                    if (document.getElementById('question-screen').classList.contains('active')) {
                        answerQuestion(true);
                    }
                    break;
                case 'n':
                case 'N':
                    if (document.getElementById('question-screen').classList.contains('active')) {
                        answerQuestion(false);
                    }
                    break;
                case 'Escape':
                    resetQuestionnaire();
                    break;
                case 'Backspace':
                    if (document.getElementById('question-screen').classList.contains('active')) {
                        goBack();
                    }
                    break;
            }
        });

        console.log("Alle Funktionen wurden definiert, startQuestionnaire ist verf√ºgbar:", typeof startQuestionnaire);

        // Override spacing through inline styles for maximum compatibility
        function applyCompactStyling() {
            const additionalInfo = document.querySelectorAll('.additional-info');
            additionalInfo.forEach(box => {
                // Set compact styles
                box.style.lineHeight = '1.4';
                box.style.padding = '15px';
                
                // Adjust spacing around strong elements
                const strongElements = box.querySelectorAll('strong');
                strongElements.forEach(el => {
                    // First-level elements get special treatment
                    if (el.parentElement === box || el.parentElement.classList.contains('info-header')) {
                        el.style.marginRight = '8px';
                        el.style.display = 'inline-block';
                    } else {
                        el.style.marginBottom = '2px';
                        el.style.marginTop = '10px';
                        el.style.display = 'block';
                    }
                });
            });
        }

        // Call after showing questions
        const originalShowQuestion = showQuestion;
        showQuestion = function() {
            originalShowQuestion.apply(this, arguments);
            setTimeout(applyCompactStyling, 0);
        };
    </script>
    <script>
        console.log("HTML Script-Tag funktioniert!");
        
        // Fallback f√ºr startQuestionnaire
        if (typeof startQuestionnaire === 'undefined') {
            console.error("startQuestionnaire ist nicht definiert!");
            window.startQuestionnaire = function() {
                alert("Fallback: startQuestionnaire wurde aufgerufen!");
            };
        }
    </script>
</body>
</html>
